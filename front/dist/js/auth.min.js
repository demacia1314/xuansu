class Auth{constructor(){var a=this;a.maskWrapper=$(".mask-wrapper"),a.scrollWrapper=$(".scroll-wrapper"),a.listenShowHideEvent(),a.listenSwitchEvent(),a.listenSigninEvent(),a.listenImageCaptcha(),a.listenEmailCaptcha(),a.listenSignupEvent()}listenSwitchEvent=()=>{var t=this,i=$(".auth-inner-wrapper");$(".switch").click(function(){var a=i.find("span[class='title']"),n=i.find("a[class='switch']"),e=t.scrollWrapper.css("left");(e=parseInt(e))<0?(t.scrollWrapper.animate({left:"0"}),a.css({float:"left"}),n.css({float:"right"})):(t.scrollWrapper.animate({left:"-400px"}),a.css({float:"right"}),n.css({float:"left"}))})};showEvent=()=>{this.maskWrapper.show(),this.maskWrapper.animate({opacity:"1"},500)};closeEvent=()=>{var a=this;a.maskWrapper.animate({opacity:"0"},500,function(){a.maskWrapper.hide()})};listenShowHideEvent=()=>{var a=this;$("#sign-in-up").click(function(){a.showEvent()}),$(".close-btn").click(function(){a.closeEvent()})};listenImageCaptcha=()=>{var a=$(".image-captcha");a.click(function(){a.attr("src","/xuansu_auth/image_captcha/?random="+Math.random())})};listenEmailCaptcha=()=>{var n=$(".signup-group").find("input[name='email']");$(".email-captcha-btn").click(function(a){a.preventDefault();a=n.val();a?(window.messageBox.showInfo("验证码发送成功"),xuansu_ajax.get({url:"/xuansu_auth/email_captcha/",data:{email:a},success:function(a){if(200!=a.code){var n=a.message;if("string"==typeof n||n.constructor==String)window.messageBox.showError(n);else for(var e in n){e=n[e][0];window.messageBox.showError(e)}}}})):window.messageBox.showError("请输入邮箱")})};listenSigninEvent=()=>{var a=$(".signin-group"),t=a.find("input[name='account']"),i=a.find("input[name='password']"),s=a.find("input[name='remember']");a.find(".submit-btn").click(function(){var a=t.val(),n=i.val(),e=s.prop("checked");xuansu_ajax.post({url:"/xuansu_auth/login/",data:{account:a,password:n,remember:e},success:function(a){if(200==a.code)window.location.reload();else{var n=a.message;if("string"==typeof n||n.constructor==String)window.messageBox.showError(n);else for(var e in n){e=n[e][0];window.messageBox.showError(e)}}}})})};listenSignupEvent=()=>{var r=$(".signup-group");r.find(".submit-btn").click(function(a){a.preventDefault();var n=r.find("input[name='username']"),e=r.find("input[name='account']"),t=r.find("input[name='password']"),i=r.find("input[name='email']"),s=r.find("input[name='image-captcha']"),a=r.find("input[name='email-captcha']"),n=n.val(),e=e.val(),t=t.val(),i=i.val(),s=s.val(),a=a.val();xuansu_ajax.post({url:"/xuansu_auth/register/",data:{username:n,account:e,password:t,email:i,imageCaptcha:s,emailCaptcha:a},success:function(a){if(200==a.code)window.location.reload();else{var n=a.message;if("string"==typeof n||n.constructor==String)window.messageBox.showError(n);else for(var e in n){e=n[e][0];window.messageBox.showError(e)}}}})})}}$(function(){new Auth}),$(function(){new FrontBase});